# C++ Module 07: C++ Templates

## 1. 課題の概要

C++テンプレートの基礎を学ぶモジュール。関数テンプレート（ex00, ex01）からクラステンプレート（ex02）へと段階的に進む。テンプレートによって「型に依存しない汎用的なコード」を書く方法を習得する。

## 2. 背景: なぜこの課題が存在するか

テンプレートはC++のジェネリックプログラミングの基盤であり、STL（Module 08で扱う）の内部実装を理解するための前提知識となる。同じロジックを異なる型に対して重複して書くことを避け、型安全性を保ちながらコードを再利用する仕組みを学ぶ。

## 3. 学習ポイント

- 関数テンプレートの定義と暗黙的な型推論
- クラステンプレートの定義と明示的な型指定
- テンプレートコードがヘッダに置かれる理由（インスタンス化の仕組み）
- const/non-constの両方に対応するテンプレート設計
- テンプレートクラスにおけるOrthodox Canonical Form

## 4. 共通ルール

### コンパイル
- コンパイラ: `c++`
- フラグ: `-Wall -Wextra -Werror`
- `-std=c++98` でもコンパイルが通ること

### 禁止事項
- `using namespace <ns_name>` 禁止（明示的許可がない限り）
- `friend` キーワード禁止（明示的許可がない限り）
- STLのコンテナ・アルゴリズム禁止（Module 08以降で解禁）
- `*printf()`, `*alloc()`, `free()` 禁止
- C++11以降の機能・Boostライブラリ禁止

### 設計要件
- メモリリーク禁止（`new`で確保したら必ず解放）
- Module 02〜09のクラスはOrthodox Canonical Form（明示的除外がない限り）
- 関数テンプレート以外の関数実装をヘッダに置くと0点
- ヘッダにはインクルードガード必須
- ファイル名はクラス名に準拠（UpperCamelCase）

---

## 5. Exercise 00: Start with a few functions

### 基本情報
- ディレクトリ: `ex00/`
- 提出ファイル: `Makefile`, `main.cpp`, `whatever.{h, hpp}`
- 追加の禁止事項: なし

### 要件

3つの関数テンプレートを実装する。

#### `swap`
- 2つの引数の値を交換する
- 戻り値なし（void）

#### `min`
- 2つの引数を比較し、小さい方を返す
- 等しい場合は**第2引数**を返す

#### `max`
- 2つの引数を比較し、大きい方を返す
- 等しい場合は**第2引数**を返す

### 制約
- 任意の型で呼び出せること
- 2つの引数は同じ型であること
- その型がすべての比較演算子をサポートしていること
- テンプレートはヘッダファイル内で定義すること

### 期待される出力（課題指定のmain）

```
a = 3, b = 2
min(a, b) = 2
max(a, b) = 3
c = chaine2, d = chaine1
min(c, d) = chaine1
max(c, d) = chaine2
```

---

## 6. Exercise 01: Iter

### 基本情報
- ディレクトリ: `ex01/`
- 提出ファイル: `Makefile`, `main.cpp`, `iter.{h, hpp}`
- 追加の禁止事項: なし

### 要件

関数テンプレート `iter` を実装する。引数3つ、戻り値なし。

#### パラメータ
1. 配列のアドレス
2. 配列の長さ（`const`値として渡される）
3. 配列の各要素に対して呼び出される関数

### 制約
- 任意の型の配列で動作すること
- 第3引数はインスタンス化された関数テンプレートでもよい
- 第3引数の関数は、文脈に応じて `const参照` または `非const参照` で引数を受け取る可能性がある
- **const要素とnon-const要素の両方をサポートする設計を考えること**（課題のヒント）
- テスト用の `main.cpp` を提出すること

---

## 7. Exercise 02: Array

### 基本情報
- ディレクトリ: `ex02/`
- 提出ファイル: `Makefile`, `main.cpp`, `Array.{h, hpp}`
- オプションファイル: `Array.tpp`
- 追加の禁止事項: なし

### 要件

型Tの要素を格納するクラステンプレート `Array` を実装する。

#### コンストラクタ
1. **引数なし**: 空の配列を生成
2. **`unsigned int n`**: n個の要素をデフォルト値で初期化した配列を生成
   - ヒント: `int * a = new int();` をコンパイルして `*a` を表示してみること（→ デフォルト初期化の確認）

#### Orthodox Canonical Form
3. **コピーコンストラクタ**と**代入演算子**: ディープコピーであること。コピー後に一方を変更しても他方に影響しないこと。

#### メモリ管理
4. メモリ確保には **`new[]`** を使用すること（必須）
5. 事前確保（preventive allocation）禁止
6. 未確保メモリへのアクセス禁止

#### アクセス
7. **`operator[]`** で要素にアクセスできること
8. インデックスが範囲外の場合、**`std::exception`** をスローすること

#### メンバ関数
9. **`size()`**: 配列の要素数を返す。引数なし。constメンバ関数であること（現在のインスタンスを変更しない）。

### テスト
- `main.cpp` にテストを記述して提出すること

---

## 8. 提出・評価

- Gitリポジトリに提出
- 評価時にコードの軽微な修正を求められる可能性がある（理解度確認のため）
- ディレクトリ名・ファイル名の正確性を確認すること
